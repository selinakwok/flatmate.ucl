{"ast":null,"code":"import { format } from \"./isomorphic.node\";\n/**\n * Normalizes Ono options, accounting for defaults and optional options.\n */\n\nexport function normalizeOptions(options) {\n  options = options || {};\n  return {\n    concatMessages: options.concatMessages === undefined ? true : Boolean(options.concatMessages),\n    format: options.format === undefined ? format : typeof options.format === \"function\" ? options.format : false\n  };\n}\n/**\n * Normalizes the Ono arguments, accounting for defaults, options, and optional arguments.\n */\n\nexport function normalizeArgs(args, options) {\n  let originalError;\n  let props;\n  let formatArgs;\n  let message = \"\"; // Determine which arguments were actually specified\n\n  if (typeof args[0] === \"string\") {\n    formatArgs = args;\n  } else if (typeof args[1] === \"string\") {\n    if (args[0] instanceof Error) {\n      originalError = args[0];\n    } else {\n      props = args[0];\n    }\n\n    formatArgs = args.slice(1);\n  } else {\n    originalError = args[0];\n    props = args[1];\n    formatArgs = args.slice(2);\n  } // If there are any format arguments, then format the error message\n\n\n  if (formatArgs.length > 0) {\n    if (options.format) {\n      message = options.format.apply(undefined, formatArgs);\n    } else {\n      message = formatArgs.join(\" \");\n    }\n  }\n\n  if (options.concatMessages && originalError && originalError.message) {\n    // The inner-error's message will be added to the new message\n    message += (message ? \" \\n\" : \"\") + originalError.message;\n  }\n\n  return {\n    originalError,\n    props,\n    message\n  };\n}","map":{"version":3,"mappings":"AAAA,SAASA,MAAT,QAAuB,mBAAvB;AAGA;;;;AAGA,OAAM,SAAUC,gBAAV,CAA2BC,OAA3B,EAA+C;AACnDA,SAAO,GAAGA,OAAO,IAAI,EAArB;AACA,SAAO;AACLC,kBAAc,EAAED,OAAO,CAACC,cAAR,KAA2BC,SAA3B,GAAuC,IAAvC,GAA8CC,OAAO,CAACH,OAAO,CAACC,cAAT,CADhE;AAELH,UAAM,EAAEE,OAAO,CAACF,MAAR,KAAmBI,SAAnB,GAA+BJ,MAA/B,GACH,OAAOE,OAAO,CAACF,MAAf,KAA0B,UAA1B,GAAuCE,OAAO,CAACF,MAA/C,GAAwD;AAHxD,GAAP;AAKD;AAED;;;;AAGA,OAAM,SAAUM,aAAV,CAA+DC,IAA/D,EAAgFL,OAAhF,EAAmG;AACvG,MAAIM,aAAJ;AACA,MAAIC,KAAJ;AACA,MAAIC,UAAJ;AACA,MAAIC,OAAO,GAAG,EAAd,CAJuG,CAMvG;;AACA,MAAI,OAAOJ,IAAI,CAAC,CAAD,CAAX,KAAmB,QAAvB,EAAiC;AAC/BG,cAAU,GAAGH,IAAb;AACD,GAFD,MAGK,IAAI,OAAOA,IAAI,CAAC,CAAD,CAAX,KAAmB,QAAvB,EAAiC;AACpC,QAAIA,IAAI,CAAC,CAAD,CAAJ,YAAmBK,KAAvB,EAA8B;AAC5BJ,mBAAa,GAAGD,IAAI,CAAC,CAAD,CAApB;AACD,KAFD,MAGK;AACHE,WAAK,GAAGF,IAAI,CAAC,CAAD,CAAZ;AACD;;AACDG,cAAU,GAAGH,IAAI,CAACM,KAAL,CAAW,CAAX,CAAb;AACD,GARI,MASA;AACHL,iBAAa,GAAGD,IAAI,CAAC,CAAD,CAApB;AACAE,SAAK,GAAGF,IAAI,CAAC,CAAD,CAAZ;AACAG,cAAU,GAAGH,IAAI,CAACM,KAAL,CAAW,CAAX,CAAb;AACD,GAvBsG,CAyBvG;;;AACA,MAAIH,UAAU,CAACI,MAAX,GAAoB,CAAxB,EAA2B;AACzB,QAAIZ,OAAO,CAACF,MAAZ,EAAoB;AAClBW,aAAO,GAAGT,OAAO,CAACF,MAAR,CAAee,KAAf,CAAqBX,SAArB,EAAgCM,UAAhC,CAAV;AACD,KAFD,MAGK;AACHC,aAAO,GAAGD,UAAU,CAACM,IAAX,CAAgB,GAAhB,CAAV;AACD;AACF;;AAED,MAAId,OAAO,CAACC,cAAR,IAA0BK,aAA1B,IAA2CA,aAAa,CAACG,OAA7D,EAAsE;AACpE;AACAA,WAAO,IAAI,CAACA,OAAO,GAAG,KAAH,GAAW,EAAnB,IAAyBH,aAAa,CAACG,OAAlD;AACD;;AAED,SAAO;AAAEH,iBAAF;AAAiBC,SAAjB;AAAwBE;AAAxB,GAAP;AACD","names":["format","normalizeOptions","options","concatMessages","undefined","Boolean","normalizeArgs","args","originalError","props","formatArgs","message","Error","slice","length","apply","join"],"sourceRoot":"","sources":["../src/normalize.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}