{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar merge_1 = tslib_1.__importDefault(require(\"lodash/merge\"));\n\nvar get_1 = tslib_1.__importDefault(require(\"lodash/get\"));\n\nvar react_1 = tslib_1.__importStar(require(\"react\"));\n\nvar react_2 = require(\"@jsonforms/react\");\n\nvar core_1 = require(\"@jsonforms/core\");\n\nvar ExpansionPanelDetails_1 = tslib_1.__importDefault(require(\"@material-ui/core/ExpansionPanelDetails\"));\n\nvar IconButton_1 = tslib_1.__importDefault(require(\"@material-ui/core/IconButton\"));\n\nvar ExpansionPanel_1 = tslib_1.__importDefault(require(\"@material-ui/core/ExpansionPanel\"));\n\nvar ExpansionPanelSummary_1 = tslib_1.__importDefault(require(\"@material-ui/core/ExpansionPanelSummary\"));\n\nvar core_2 = require(\"@material-ui/core\");\n\nvar ExpandMore_1 = tslib_1.__importDefault(require(\"@material-ui/icons/ExpandMore\"));\n\nvar Avatar_1 = tslib_1.__importDefault(require(\"@material-ui/core/Avatar\"));\n\nvar Delete_1 = tslib_1.__importDefault(require(\"@material-ui/icons/Delete\"));\n\nvar ArrowUpward_1 = tslib_1.__importDefault(require(\"@material-ui/icons/ArrowUpward\"));\n\nvar ArrowDownward_1 = tslib_1.__importDefault(require(\"@material-ui/icons/ArrowDownward\"));\n\nvar v1_1 = tslib_1.__importDefault(require(\"uuid/v1\"));\n\nvar iconStyle = {\n  float: 'right'\n};\n\nvar ExpandPanelRenderer = function (props) {\n  var labelHtmlId = react_1.useState(\"id\" + v1_1.default())[0];\n  var childLabel = props.childLabel,\n      childPath = props.childPath,\n      index = props.index,\n      expanded = props.expanded,\n      moveDown = props.moveDown,\n      moveUp = props.moveUp,\n      enableMoveDown = props.enableMoveDown,\n      enableMoveUp = props.enableMoveUp,\n      handleExpansion = props.handleExpansion,\n      removeItems = props.removeItems,\n      path = props.path,\n      rootSchema = props.rootSchema,\n      schema = props.schema,\n      uischema = props.uischema,\n      uischemas = props.uischemas,\n      renderers = props.renderers,\n      cells = props.cells,\n      config = props.config;\n  var foundUISchema = react_1.useMemo(function () {\n    return core_1.findUISchema(uischemas, schema, uischema.scope, path, undefined, uischema, rootSchema);\n  }, [uischemas, schema, uischema.scope, path, uischema, rootSchema]);\n  var appliedUiSchemaOptions = merge_1.default({}, config, uischema.options);\n  return react_1.default.createElement(ExpansionPanel_1.default, {\n    \"aria-labelledby\": labelHtmlId,\n    expanded: expanded,\n    onChange: handleExpansion(childPath)\n  }, react_1.default.createElement(ExpansionPanelSummary_1.default, {\n    expandIcon: react_1.default.createElement(ExpandMore_1.default, null)\n  }, react_1.default.createElement(core_2.Grid, {\n    container: true,\n    alignItems: 'center'\n  }, react_1.default.createElement(core_2.Grid, {\n    item: true,\n    xs: 7,\n    md: 9\n  }, react_1.default.createElement(core_2.Grid, {\n    container: true,\n    alignItems: 'center'\n  }, react_1.default.createElement(core_2.Grid, {\n    item: true,\n    xs: 2,\n    md: 1\n  }, react_1.default.createElement(Avatar_1.default, {\n    \"aria-label\": 'Index'\n  }, index + 1)), react_1.default.createElement(core_2.Grid, {\n    item: true,\n    xs: 10,\n    md: 11\n  }, react_1.default.createElement(\"span\", {\n    id: labelHtmlId\n  }, childLabel)))), react_1.default.createElement(core_2.Grid, {\n    item: true,\n    xs: 5,\n    md: 3\n  }, react_1.default.createElement(core_2.Grid, {\n    container: true,\n    justify: 'flex-end'\n  }, react_1.default.createElement(core_2.Grid, {\n    item: true\n  }, react_1.default.createElement(core_2.Grid, {\n    container: true,\n    direction: 'row',\n    justify: 'center',\n    alignItems: 'center'\n  }, appliedUiSchemaOptions.showSortButtons ? react_1.default.createElement(react_1.Fragment, null, react_1.default.createElement(core_2.Grid, {\n    item: true\n  }, react_1.default.createElement(IconButton_1.default, {\n    onClick: moveUp(path, index),\n    style: iconStyle,\n    disabled: !enableMoveUp,\n    \"aria-label\": \"Move up\"\n  }, react_1.default.createElement(ArrowUpward_1.default, null))), react_1.default.createElement(core_2.Grid, {\n    item: true\n  }, react_1.default.createElement(IconButton_1.default, {\n    onClick: moveDown(path, index),\n    style: iconStyle,\n    disabled: !enableMoveDown,\n    \"aria-label\": \"Move down\"\n  }, react_1.default.createElement(ArrowDownward_1.default, null)))) : '', react_1.default.createElement(core_2.Grid, {\n    item: true\n  }, react_1.default.createElement(IconButton_1.default, {\n    onClick: removeItems(path, [index]),\n    style: iconStyle,\n    \"aria-label\": \"Delete\"\n  }, react_1.default.createElement(Delete_1.default, null))))))))), react_1.default.createElement(ExpansionPanelDetails_1.default, null, react_1.default.createElement(react_2.ResolvedJsonFormsDispatch, {\n    schema: schema,\n    uischema: foundUISchema,\n    path: childPath,\n    key: childPath,\n    renderers: renderers,\n    cells: cells\n  })));\n};\n/**\n * Maps state to dispatch properties of an expand pandel control.\n *\n * @param dispatch the store's dispatch method\n * @returns {DispatchPropsOfArrayControl} dispatch props of an expand panel control\n */\n\n\nexports.ctxDispatchToExpandPanelProps = function (dispatch) {\n  return {\n    removeItems: function (path, toDelete) {\n      return function (event) {\n        event.stopPropagation();\n        dispatch(core_1.update(path, function (array) {\n          toDelete.sort().reverse().forEach(function (s) {\n            return array.splice(s, 1);\n          });\n          return array;\n        }));\n      };\n    },\n    moveUp: function (path, toMove) {\n      return function (event) {\n        event.stopPropagation();\n        dispatch(core_1.update(path, function (array) {\n          core_1.moveUp(array, toMove);\n          return array;\n        }));\n      };\n    },\n    moveDown: function (path, toMove) {\n      return function (event) {\n        event.stopPropagation();\n        dispatch(core_1.update(path, function (array) {\n          core_1.moveDown(array, toMove);\n          return array;\n        }));\n      };\n    }\n  };\n};\n/**\n * Map state to control props.\n * @param state the JSON Forms state\n * @param ownProps any own props\n * @returns {StatePropsOfControl} state props for a control\n */\n\n\nexports.withContextToExpandPanelProps = function (Component) {\n  return function (_a) {\n    var ctx = _a.ctx,\n        props = _a.props;\n    var dispatchProps = exports.ctxDispatchToExpandPanelProps(ctx.dispatch);\n    var childLabelProp = props.childLabelProp,\n        schema = props.schema,\n        path = props.path,\n        index = props.index,\n        uischemas = props.uischemas;\n    var childPath = core_1.composePaths(path, \"\" + index);\n    var childData = core_1.Resolve.data(ctx.core.data, childPath);\n    var childLabel = childLabelProp ? get_1.default(childData, childLabelProp, '') : get_1.default(childData, core_1.getFirstPrimitiveProp(schema), '');\n    return react_1.default.createElement(Component, tslib_1.__assign({}, props, dispatchProps, {\n      childLabel: childLabel,\n      childPath: childPath,\n      uischemas: uischemas\n    }));\n  };\n};\n\nexports.withJsonFormsExpandPanelProps = function (Component) {\n  return react_2.withJsonFormsContext(exports.withContextToExpandPanelProps(react_1.default.memo(Component, function (prevProps, nextProps) {\n    return react_2.areEqual(prevProps, nextProps);\n  })));\n};\n\nexports.default = exports.withJsonFormsExpandPanelProps(ExpandPanelRenderer);","map":{"version":3,"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AAMA;;AAcA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,SAAS,GAAQ;AAAEC,OAAK,EAAE;AAAT,CAAvB;;AAuCA,IAAMC,mBAAmB,GAAG,UAACC,KAAD,EAAwB;AAC3C;AAGL;AAAA,MACAC,2BADA;AAAA,MAEAC,mBAFA;AAAA,MAGAC,yBAHA;AAAA,MAIAC,yBAJA;AAAA,MAKAC,qBALA;AAAA,MAMAC,qCANA;AAAA,MAOAC,iCAPA;AAAA,MAQAC,uCARA;AAAA,MASAC,+BATA;AAAA,MAUAC,iBAVA;AAAA,MAWAC,6BAXA;AAAA,MAYAC,qBAZA;AAAA,MAaAC,yBAbA;AAAA,MAcAC,2BAdA;AAAA,MAeAC,2BAfA;AAAA,MAgBAC,mBAhBA;AAAA,MAiBAC,qBAjBA;AAoBF,MAAMC,aAAa,GAAGC,gBACpB;AACE,+BACEL,SADF,EAEEF,MAFF,EAGEC,QAAQ,CAACO,KAHX,EAIEV,IAJF,EAKEW,SALF,EAMER,QANF,EAOEF,UAPF;AAQC,GAViB,EAWpB,CAACG,SAAD,EAAYF,MAAZ,EAAoBC,QAAQ,CAACO,KAA7B,EAAoCV,IAApC,EAA0CG,QAA1C,EAAoDF,UAApD,CAXoB,CAAtB;AAcA,MAAMW,sBAAsB,GAAGC,gBAAM,EAAN,EAAUN,MAAV,EAAkBJ,QAAQ,CAACW,OAA3B,CAA/B;AAEA,SACEL,8BAACM,wBAAD,EAAe;AAAA,uBACIC,WADJ;AAEbvB,YAAQ,EAAEA,QAFG;AAGbwB,YAAQ,EAAEnB,eAAe,CAACP,SAAD;AAHZ,GAAf,EAKEkB,8BAACS,+BAAD,EAAsB;AAACC,cAAU,EAAEV,8BAACW,oBAAD,EAAe,IAAf;AAAb,GAAtB,EACEX,8BAACY,WAAD,EAAK;AAACC,aAAS,MAAV;AAAWC,cAAU,EAAE;AAAvB,GAAL,EACEd,8BAACY,WAAD,EAAK;AAACG,QAAI,MAAL;AAAMC,MAAE,EAAE,CAAV;AAAaC,MAAE,EAAE;AAAjB,GAAL,EACEjB,8BAACY,WAAD,EAAK;AAACC,aAAS,MAAV;AAAWC,cAAU,EAAE;AAAvB,GAAL,EACEd,8BAACY,WAAD,EAAK;AAACG,QAAI,MAAL;AAAMC,MAAE,EAAE,CAAV;AAAaC,MAAE,EAAE;AAAjB,GAAL,EACEjB,8BAACkB,gBAAD,EAAO;AAAA,kBAAY;AAAZ,GAAP,EAA4BnC,KAAK,GAAG,CAApC,CADF,CADF,EAIEiB,8BAACY,WAAD,EAAK;AAACG,QAAI,MAAL;AAAMC,MAAE,EAAE,EAAV;AAAcC,MAAE,EAAE;AAAlB,GAAL,EACEjB;AAAMmB,MAAE,EAAEZ;AAAV,KAAwBa,UAAxB,CADF,CAJF,CADF,CADF,EAWEpB,8BAACY,WAAD,EAAK;AAACG,QAAI,MAAL;AAAMC,MAAE,EAAE,CAAV;AAAaC,MAAE,EAAE;AAAjB,GAAL,EACEjB,8BAACY,WAAD,EAAK;AAACC,aAAS,MAAV;AAAWQ,WAAO,EAAE;AAApB,GAAL,EACErB,8BAACY,WAAD,EAAK;AAACG,QAAI;AAAL,GAAL,EACEf,8BAACY,WAAD,EAAK;AACHC,aAAS,MADN;AAEHS,aAAS,EAAC,KAFP;AAGHD,WAAO,EAAC,QAHL;AAIHP,cAAU,EAAC;AAJR,GAAL,EAMGX,sBAAsB,CAACoB,eAAvB,GACCvB,8BAACA,gBAAD,EAAS,IAAT,EACEA,8BAACY,WAAD,EAAK;AAACG,QAAI;AAAL,GAAL,EACEf,8BAACwB,oBAAD,EAAW;AACTC,WAAO,EAAEvC,MAAM,CAACK,IAAD,EAAOR,KAAP,CADN;AAET2C,SAAK,EAAEhD,SAFE;AAGTiD,YAAQ,EAAE,CAACvC,YAHF;AAGc,kBACX;AAJH,GAAX,EAMEY,8BAAC4B,qBAAD,EAAY,IAAZ,CANF,CADF,CADF,EAWE5B,8BAACY,WAAD,EAAK;AAACG,QAAI;AAAL,GAAL,EACEf,8BAACwB,oBAAD,EAAW;AACTC,WAAO,EAAExC,QAAQ,CAACM,IAAD,EAAOR,KAAP,CADR;AAET2C,SAAK,EAAEhD,SAFE;AAGTiD,YAAQ,EAAE,CAACxC,cAHF;AAGgB,kBACb;AAJH,GAAX,EAMEa,8BAAC6B,uBAAD,EAAc,IAAd,CANF,CADF,CAXF,CADD,GAwBC,EA9BJ,EAgCE7B,8BAACY,WAAD,EAAK;AAACG,QAAI;AAAL,GAAL,EACEf,8BAACwB,oBAAD,EAAW;AACTC,WAAO,EAAEnC,WAAW,CAACC,IAAD,EAAO,CAACR,KAAD,CAAP,CADX;AAET2C,SAAK,EAAEhD,SAFE;AAEO,kBACJ;AAHH,GAAX,EAKEsB,8BAAC8B,gBAAD,EAAW,IAAX,CALF,CADF,CAhCF,CADF,CADF,CADF,CAXF,CADF,CALF,EAmEE9B,8BAAC+B,+BAAD,EAAsB,IAAtB,EACE/B,8BAACgC,iCAAD,EAA0B;AACxBvC,UAAM,EAAEA,MADgB;AAExBC,YAAQ,EAAEK,aAFc;AAGxBR,QAAI,EAAET,SAHkB;AAIxBmD,OAAG,EAAEnD,SAJmB;AAKxBc,aAAS,EAAEA,SALa;AAMxBC,SAAK,EAAEA;AANiB,GAA1B,CADF,CAnEF,CADF;AAgFD,CAxHD;AA0HA;;;;;;;;AAMaqC,wCAEqB,oBAAQ;AAAI,SAAC;AAC7C5C,eAAW,EAAE,UAACC,IAAD,EAAe4C,QAAf,EAAiC;AAAK,uBAACC,KAAD,EAAW;AAC5DA,aAAK,CAACC,eAAN;AACAC,gBAAQ,CACNC,cAAOhD,IAAP,EAAa,iBAAK;AAChB4C,kBAAQ,CACLK,IADH,GAEGC,OAFH,GAGGC,OAHH,CAGW,aAAC;AAAI,wBAAK,CAACC,MAAN,CAAaC,CAAb,EAAgB,CAAhB;AAAkB,WAHlC;AAIA,iBAAOC,KAAP;AACD,SAND,CADM,CAAR;AASD,OAXkD;AAWlD,KAZ4C;AAa7C3D,UAAM,EAAE,UAACK,IAAD,EAAeuD,MAAf,EAA6B;AAAK,uBAACV,KAAD,EAAW;AACnDA,aAAK,CAACC,eAAN;AACAC,gBAAQ,CACNC,cAAOhD,IAAP,EAAa,iBAAK;AAChBgD,wBAAOM,KAAP,EAAcC,MAAd;AACA,iBAAOD,KAAP;AACD,SAHD,CADM,CAAR;AAMD,OARyC;AAQzC,KArB4C;AAsB7C5D,YAAQ,EAAE,UAACM,IAAD,EAAeuD,MAAf,EAA6B;AAAK,uBAACV,KAAD,EAAW;AACrDA,aAAK,CAACC,eAAN;AACAC,gBAAQ,CACNC,cAAOhD,IAAP,EAAa,iBAAK;AAChBgD,0BAASM,KAAT,EAAgBC,MAAhB;AACA,iBAAOD,KAAP;AACD,SAHD,CADM,CAAR;AAMD,OAR2C;AAQ3C;AA9B4C,GAAD;AA+B5C,CAjCW;AAmCb;;;;;;;;AAMaX,wCAAgC,UAC3Ca,SAD2C,EACD;AACD,mBAACC,EAAD,EAGA;QAFzCC;QACApE;AAEA,QAAMqE,aAAa,GAAGhB,sCAA8Be,GAAG,CAACX,QAAlC,CAAtB;AACQ;AAAA,QAAgB7C,qBAAhB;AAAA,QAAwBF,iBAAxB;AAAA,QAA8BR,mBAA9B;AAAA,QAAqCY,2BAArC;AACR,QAAMb,SAAS,GAAGyD,oBAAahD,IAAb,EAAmB,KAAGR,KAAtB,CAAlB;AACA,QAAMoE,SAAS,GAAGZ,eAAQa,IAAR,CAAaH,GAAG,CAACI,IAAJ,CAASD,IAAtB,EAA4BtE,SAA5B,CAAlB;AACA,QAAMsC,UAAU,GAAGkC,cAAc,GAC7BC,cAAIJ,SAAJ,EAAeG,cAAf,EAA+B,EAA/B,CAD6B,GAE7BC,cAAIJ,SAAJ,EAAeZ,6BAAsB9C,MAAtB,CAAf,EAA8C,EAA9C,CAFJ;AAIA,WACEO,8BAAC+C,SAAD,EAAUS,qBACJ3E,KADI,EAEJqE,aAFI,EAES;AACjB9B,gBAAU,EAAEA,UADK;AAEjBtC,eAAS,EAAEA,SAFM;AAGjBa,eAAS,EAAEA;AAHM,KAFT,CAAV,CADF;AASD,GArB0C;AAqB1C,CAvBY;;AAyBAuC,wCAAgC,UAC3Ca,SAD2C,EACD;AAE1C,sCACEb,sCACElC,gBAAMyD,IAAN,CACEV,SADF,EAEE,UAACW,SAAD,EAA8BC,SAA9B,EAAyD;AACvD,4BAASD,SAAT,EAAoBC,SAApB;AAA8B,GAHlC,CADF,CADF;AAQC,CAXU;;AAabzB,kBAAeA,sCAA8BtD,mBAA9B,CAAf","names":["iconStyle","float","ExpandPanelRenderer","props","childPath","index","expanded","moveDown","moveUp","enableMoveDown","enableMoveUp","handleExpansion","removeItems","path","rootSchema","schema","uischema","uischemas","renderers","cells","config","foundUISchema","react_1","scope","undefined","appliedUiSchemaOptions","merge_1","options","ExpansionPanel_1","labelHtmlId","onChange","ExpansionPanelSummary_1","expandIcon","ExpandMore_1","core_2","container","alignItems","item","xs","md","Avatar_1","id","childLabel","justify","direction","showSortButtons","IconButton_1","onClick","style","disabled","ArrowUpward_1","ArrowDownward_1","Delete_1","ExpansionPanelDetails_1","react_2","key","exports","toDelete","event","stopPropagation","dispatch","core_1","sort","reverse","forEach","splice","s","array","toMove","Component","_a","ctx","dispatchProps","childData","data","core","childLabelProp","get_1","tslib_1","memo","prevProps","nextProps"],"sourceRoot":"","sources":["../../src/layouts/ExpandPanelRenderer.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}